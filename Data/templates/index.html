<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard - Synced</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Stylish Font for Editorial Look -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@200;400;600;800&display=swap" rel="stylesheet">
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        'dark-primary': '#0D1716',
                        'dark-secondary': '#16201F',
                        'accent-teal': '#66BB6A', 
                        'text-light': '#E0F2F1',
                        'text-dim': '#808E8B',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'rain': 'rain-drop 0.6s linear infinite',
                        'snow': 'snow-flake 3s linear infinite',
                        'pulse-storm': 'pulse-storm 2s infinite',
                        'strike': 'strike 1.5s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        'rain-drop': {
                            '0%': { transform: 'translateY(-10px) scaleY(1)', opacity: '0' },
                            '10%': { opacity: '0.8' },
                            '100%': { transform: 'translateY(120px) scaleY(1.5)', opacity: '0' },
                        },
                        'snow-flake': {
                            '0%': { transform: 'translateY(-10px) rotate(0deg)', opacity: '0' },
                            '20%': { opacity: '1' },
                            '100%': { transform: 'translateY(120px) rotate(360deg)', opacity: '0' },
                        },
                        'pulse-storm': {
                            '0%, 100%': { filter: 'brightness(1)' },
                            '50%': { filter: 'brightness(0.7)' }, // Darken cloud for storm
                        },
                        // A realistic double-flash lightning effect
                        'strike': {
                            '0%, 85%': { opacity: '0' },
                            '86%': { opacity: '1' }, // Flash 1
                            '88%': { opacity: '0.4' },
                            '90%': { opacity: '1' }, // Flash 2
                            '100%': { opacity: '0' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .drop-cap {
            float: left; font-size: 5rem; line-height: 0.8; padding-right: 0.75rem; padding-top: 0.25rem;
            font-family: 'Playfair Display', serif; color: #66BB6A; font-weight: 700;
        }

        /* --- THE WEATHER STAGE --- */
        .weather-stage {
            border-radius: 50%;
            position: relative;
            /* Smoothly transition background colors when state changes */
            transition: background 1.5s ease;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2), 0 20px 40px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #4FC3F7 0%, #29B6F6 100%); /* Default Sunny Blue */
        }
        
        /* State Colors applied via JS */
        .weather-stage.storm-mode {
            background: linear-gradient(135deg, #37474F 0%, #263238 100%); /* Dark Grey Storm */
        }
        .weather-stage.rain-mode {
            background: linear-gradient(135deg, #78909C 0%, #546E7A 100%); /* Muted Blue Rain */
        }

        /* --- 3D CLOUD CONSTRUCTION --- */
        /* Only visible when opacity is 1 */
        #cloud-element {
            /* This single transition class now controls the cloud's entry/exit/fade-in/fade-out */
            transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .puff {
            background: radial-gradient(circle at 30% 30%, #ffffff 0%, #e2e8f0 80%);
            border-radius: 50%;
            position: absolute;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
    </style>
</head>

<body class="min-h-screen bg-dark-primary text-text-light font-sans flex items-center justify-center p-4">
    
    <div class="w-full max-w-5xl bg-dark-secondary rounded-sm overflow-hidden shadow-2xl flex flex-col md:flex-row border border-gray-800">
        
        <!-- Left Column: The Visual Experience (Animation) -->
        <div class="w-full md:w-1/2 bg-gradient-to-br from-dark-primary to-dark-secondary p-10 flex flex-col items-center justify-center border-b md:border-b-0 md:border-r border-gray-800 relative">
            
            <!-- Weather Circle Stage -->
            <div id="weather-stage" class="relative w-72 h-72 weather-stage flex items-center justify-center overflow-hidden">
                
                <!-- 1. The Sun -->
                <div id="sun-element" class="absolute w-24 h-24 bg-gradient-to-br from-yellow-300 to-orange-400 rounded-full shadow-[0_0_50px_rgba(253,224,71,0.6)] transition-all duration-1000 ease-in-out z-10 transform"></div>

                <!-- 2. The Cloud (State-controlled) -->
                <div id="cloud-element" class="relative w-48 h-32 z-20 animate-float opacity-0 transform translate-y-10">
                    <div class="puff w-20 h-20 top-6 left-0 z-10"></div>
                    <div class="puff w-24 h-24 top-0 left-10 z-20"></div> 
                    <div class="puff w-16 h-16 top-10 right-2 z-10"></div>
                    <div class="puff w-24 h-16 bottom-0 left-6 z-30"></div> 
                </div>

                <!-- 3. Precipitation Zones (State-controlled visibility) -->
                <div id="rain-zone" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-40 h-40 pointer-events-none transition-opacity duration-500 opacity-0 z-10"></div>
                <div id="snow-zone" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-40 h-40 pointer-events-none transition-opacity duration-500 opacity-0 z-10"></div>

                <!-- 4. Thunder Bolt (State-controlled visibility and animation) -->
                <div id="thunder-bolt" class="absolute z-10 bottom-8 opacity-0 transition-opacity duration-300">
                     <svg width="60" height="100" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="drop-shadow-[0_0_15px_rgba(255,215,0,0.8)]">
                        <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" fill="#FCD34D" stroke="#F59E0B" stroke-width="1" stroke-linejoin="round"/>
                    </svg>
                </div>

            </div>

            <!-- Current Status Text -->
            <div class="mt-12 text-center h-20">
                <p class="text-xs font-mono text-text-dim tracking-[0.3em] uppercase mb-2">Live Conditions</p>
                <div id="status-text" class="text-3xl font-serif text-white italic transition-all duration-500">
                    Loading...
                </div>
            </div>
        </div>

        <!-- Right Column: The Editorial Content (unchanged) -->
        <div class="w-full md:w-1/2 p-8 md:p-12 md:py-20 flex flex-col justify-center bg-dark-secondary relative">
            <h1 class="font-serif text-5xl md:text-6xl text-white mb-8 leading-tight">
                Weather <br/> <span class="text-accent-teal italic">Dashboard.</span>
            </h1>

            <div class="mb-10 text-lg leading-relaxed text-gray-300 font-light text-justify">
                <span class="drop-cap">W</span>eather is not merely data; it is the rhythm of our planet. Designed for the aesthetically conscious, this dashboard transcends traditional forecasting. We have stripped away the clutter to reveal the raw beauty of meteorological patterns.
            </div>

            <div class="space-y-6 border-l-2 border-accent-teal/20 pl-6 mb-10">
                <div class="group">
                    <h3 class="text-xl text-white font-serif italic mb-1 group-hover:text-accent-teal transition-colors">I. Visualization</h3>
                    <p class="text-sm text-text-dim">Complex atmospheric models rendered into 3D environments.</p>
                </div>
                <div class="group">
                    <h3 class="text-xl text-white font-serif italic mb-1 group-hover:text-accent-teal transition-colors">II. Precision</h3>
                    <p class="text-sm text-text-dim">Hyper-local accuracy for precipitation and storm tracking.</p>
                </div>
            </div>

            <a href="/app" 
   class="block w-full text-center py-4 text-dark-primary bg-accent-teal font-bold text-lg tracking-widest uppercase transition-all duration-500 rounded-sm shadow-xl hover:shadow-2xl hover:bg-white hover:scale-[1.01]">
    Enter Dashboard →
</a>
            
             <div class="mt-16 pt-6 border-t border-gray-800 flex justify-between items-end">
                <div>
                    <p class="text-[10px] uppercase tracking-widest text-text-dim mb-1">Curated By</p>
                    <p class="font-serif text-lg text-white">Sam Symon</p>
                </div>
            </div>
        </div>
    </div>

    <!-- === JAVASCRIPT STATE MACHINE (The Fix) === -->
    <script>
        // === DOM ELEMENTS ===
        const stage = document.getElementById('weather-stage');
        const statusText = document.getElementById('status-text');
        const rainZone = document.getElementById('rain-zone');
        const snowZone = document.getElementById('snow-zone');
        const sun = document.getElementById('sun-element');
        const cloud = document.getElementById('cloud-element');
        const thunderBolt = document.getElementById('thunder-bolt');

        // === PARTICLE GENERATORS ===
        function createParticles(container, className, count) {
            container.innerHTML = '';
            for(let i=0; i<count; i++) {
                let p = document.createElement('div');
                p.className = className;
                p.style.left = Math.random() * 100 + '%';
                p.style.animationDelay = Math.random() + 's';
                container.appendChild(p);
            }
        }
        createParticles(rainZone, 'absolute w-0.5 h-4 bg-blue-200 rounded-full animate-rain opacity-70', 25);
        createParticles(snowZone, 'absolute w-1.5 h-1.5 bg-white rounded-full animate-snow opacity-90', 25);

        // === STATE MACHINE DEFINITION ===
        const states = [
            { id: 'sunny', text: 'Sunny', duration: 4000 },
            { id: 'rain', text: 'Rain Showers', duration: 3500 },
            { id: 'storm', text: 'Heavy Storm', duration: 3500 },
            { id: 'snow', text: 'Snowfall', duration: 3500 }
        ];

        let currentStateIndex = 0;

        function applyWeatherState(state) {
            // 1. Fade Text
            statusText.style.opacity = 0;
            setTimeout(() => {
                statusText.innerText = state.text;
                statusText.style.opacity = 1;
            }, 300);

            // 2. Reset Base Styles
            stage.classList.remove('storm-mode', 'rain-mode');
            rainZone.style.opacity = 0;
            snowZone.style.opacity = 0;
            
            thunderBolt.classList.remove('animate-strike');
            thunderBolt.style.opacity = 0;
            
            cloud.classList.remove('animate-pulse-storm');

            // 3. Apply Specific Visuals based on State ID
            switch(state.id) {
                case 'sunny':
                    // Cloud: Hidden offscreen (opacity 0 and translated down)
                    cloud.style.opacity = 0;
                    cloud.style.transform = "translateY(100px)"; 
                    // Sun: Centered, Large, Full Opacity
                    sun.style.transform = "translate(0, 0) scale(1)";
                    sun.style.opacity = 1;
                    break;

                case 'rain':
                    stage.classList.add('rain-mode');
                    // Sun: Move up-left, shrink, dim
                    sun.style.transform = "translate(-40px, -40px) scale(0.6)";
                    sun.style.opacity = 0.4;
                    // Cloud: Appear (opacity 1 and translated back to center)
                    cloud.style.opacity = 1;
                    cloud.style.transform = "translateY(10px)";
                    // Rain: On
                    rainZone.style.opacity = 1;
                    break;

                case 'storm':
                    stage.classList.add('storm-mode');
                    // Sun: Hidden completely
                    sun.style.opacity = 0;
                    // Cloud: Darkens (pulse animation) & Visible
                    cloud.style.opacity = 1;
                    cloud.style.transform = "translateY(10px)";
                    cloud.classList.add('animate-pulse-storm');
                    // Rain: On
                    rainZone.style.opacity = 1;
                    // Lightning: Active
                    thunderBolt.style.opacity = 1;
                    thunderBolt.classList.add('animate-strike');
                    break;

                case 'snow':
                    stage.classList.add('rain-mode'); // Use cool blueish grey for snow
                    // Sun: Visible but dim
                    sun.style.transform = "translate(-20px, -20px) scale(0.8)";
                    sun.style.opacity = 0.6;
                    // Cloud: Visible (White/Normal)
                    cloud.style.opacity = 1;
                    cloud.style.transform = "translateY(10px)";
                    // Snow: On
                    snowZone.style.opacity = 1;
                    break;
            }
        }

        function runCycle() {
            const currentState = states[currentStateIndex];
            applyWeatherState(currentState);

            setTimeout(() => {
                currentStateIndex = (currentStateIndex + 1) % states.length;
                runCycle();
            }, currentState.duration);
        }

        // Start the loop
        runCycle();

    </script>
</body>
</html>